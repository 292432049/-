(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-5fc3"],{"/Dk7":function(e,t,a){},"9esu":function(e,t,a){"use strict";var s=a("EJiy"),i=a.n(s),r=a("QbLZ"),o=a.n(r),n=a("fnnb"),c={name:"FhtImageCropper",components:{VueCropper:a.n(n).a},props:{cropperList:{type:Array,default:function(){return[]}}},data:function(){return{accept:"image/png, image/jpeg, image/jpg",defaultCropperOptions:{imageName:"",img:"",info:!1,size:1,outputType:"png",canScale:!0,autoCrop:!0,fixed:!0,fixedNumber:[4,3],full:!0},layer_cropper:!1,cropperImgs:[],cropperedImgs:[]}},computed:{itemStyle:function(){return{width:(this.cropperImgs.length>1?400:830)+"px"}},componentStyle:function(){return{height:(this.cropperImgs.length>1?300:600)+"px"}}},watch:{cropperList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.cropperImgs=t.map(function(t){return o()({},e.defaultCropperOptions,t)}),this.layer_cropper=this.cropperImgs.length>0}},created:function(){var e=this;this.cropperImgs=this.cropperList.map(function(t){return o()({},e.defaultCropperOptions,t)}),this.layer_cropper=this.cropperImgs.length>0},methods:{cropperClose:function(){this.cropperImgs=[]},changeScale:function(e,t){this.$refs["refCropper"+t][0].changeScale(e)},rotateLeft:function(e){this.$refs["refCropper"+e][0].rotateLeft()},rotateRight:function(e){this.$refs["refCropper"+e][0].rotateRight()},getCropData:function(){var e=this,t=0;this.cropperImgs.forEach(function(a,s){e.$refs["refCropper"+s][0].getCropData(function(s){e.cropperedImgs.push({src:s,title:a.imageName}),++t===e.cropperImgs.length&&(e.layer_cropper=!1,e.$emit("emitCropperData",e.cropperedImgs))})})},uploadImg:function(e,t){var a=this;if(!e.target.value)return console.log("取消上传..."),!1;var s=e.target.files[0];if(!this.accept.includes(s.type))return this.$message.error("请上传"+this.accept.replace(/image\//gi,"")+"的图片"),e.target.value=null,!1;var r=new FileReader;r.onerror=function(e){console.log(e+"读取异常....")},r.onload=function(e){var r="object"===i()(e.target.result)?window.URL.createObjectURL(new Blob([e.target.result])):e.target.result,o="";o=s.name?s.name.split(".")[0].length<=30?s.name.split(".")[0]:s.name.split(".")[0].substr(0,30):"",a.cropperImgs[t].img=r,a.$set(a.cropperImgs[t],"img",r),a.$set(a.cropperImgs[t],"imageName",o)},r.readAsDataURL(s),this.layer_cropper=!0,e.target.value=null}}},l=(a("UoXs"),a("KHd+")),p=Object(l.a)(c,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dialog-cropper"},[a("el-dialog",{attrs:{visible:e.layer_cropper,"append-to-body":"",title:"图片裁剪",width:"920px"},on:{"update:visible":function(t){e.layer_cropper=t},open:function(t){e.cropperedImgs=[]},close:e.cropperClose}},[a("div",{staticClass:"cropper-wrapper"},e._l(e.cropperImgs,function(t,s){return a("div",{key:s,staticClass:"cropper-item",style:e.itemStyle},[a("div",{staticClass:"cropper-component",style:e.componentStyle},[a("vueCropper",{ref:"refCropper"+s,refInFor:!0,attrs:{img:t.img,"output-size":t.size,"output-type":t.outputType,info:t.info,"can-scale":t.canScale,"auto-crop":t.autoCrop,"auto-crop-width":t.autoCropWidth,"auto-crop-height":t.autoCropHeight,full:t.full,fixed:t.fixed,"fixed-number":t.fixedNumber}})],1),e._v(" "),a("div",{staticClass:"cropper-btn--group clearfix"},[a("el-input",{staticClass:"cropper-input--imageName",attrs:{maxlength:30,placeholder:"请输入图片名称",size:"small"},model:{value:t.imageName,callback:function(a){e.$set(t,"imageName",a)},expression:"item.imageName"}}),e._v(" "),a("el-button-group",{staticClass:"btn-group right"},[a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"替换图片",placement:"top-start"}},[a("label",{staticClass:"el-button el-button--primary el-button--small",attrs:{for:"changeImage"+s}},[a("i",{staticClass:"el-icon-upload"})])]),e._v(" "),a("input",{attrs:{id:"changeImage"+s,accept:e.accept,type:"file",hidden:""},on:{change:function(t){e.uploadImg(t,s)}}}),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"放大图片",placement:"top-start"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-zoom-in"},on:{click:function(t){e.changeScale(1,s)}}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"缩小图片",placement:"top-start"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-zoom-out"},on:{click:function(t){e.changeScale(-1,s)}}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"逆时针旋转90°",placement:"top-start"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-caret-left"},on:{click:function(t){e.rotateLeft(s)}}})],1),e._v(" "),a("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"顺时针旋转90°",placement:"top-start"}},[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-caret-right"},on:{click:function(t){e.rotateRight(s)}}})],1)],1)],1)])})),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(t){e.layer_cropper=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.getCropData}},[e._v("确 定")])],1)])],1)},[],!1,null,"1216884e",null);p.options.__file="Cropper.vue";t.a=p.exports},KBld:function(e,t,a){"use strict";var s=a("QbLZ"),i=a.n(s),r=a("GQeE"),o=a.n(r),n=a("P2sY"),c=a.n(n),l=a("gDS+"),p=a.n(l),d=a("n6Nk"),m=a("nEYc"),u=a.n(m),f=a("7Qib"),g={name:"MapSelect",props:{areaCode:{type:Array,default:function(){return[]}},value:{type:String,default:""}},data:function(){return{specificAddress:"",loading:!1,addressList:[],mapModelVisible:!1,searchKeywords:"",searchResult:[],map:null,local:null,mapSelectForm:{},mapSelectFormRules:{region:[{required:!0,message:"请选择所在区域",trigger:"change"}],name:[{required:!0,message:"请输入小区名称",trigger:"blur"}],address:[{required:!0,message:"请输入具体地址",trigger:"blur"}]},tempAreaCode:[],tempMapData:{},regionOptions:[],geocoder:null}},watch:{mapModelVisible:function(e){var t=this;e?this.$nextTick(function(){t.tempAreaCode=Object(f.b)(t.areaCode),t.initBMap()}):(this.$set(this,"mapSelectForm",{}),this.searchKeywords="",this.searchResult=[],this.$refs.popover.doClose())},value:{immediate:!0,handler:function(e){this.specificAddress=e}},"mapSelectForm.region":function(e,t){e!==t&&e&&(this.tempAreaCode[2]=e)}},mounted:function(){},methods:{fetchAddressList:function(e){var t=this;""!==e?(this.loading=!0,Object(d.j)({cityId:Number(this.areaCode[1])||330100,keyword:e}).then(function(e){t.loading=!1,t.addressList=[],"0"===e.code&&e.data.list&&(e.data.list.forEach(function(e,t){e.formatName=e.name.replace(/<span(.*?)>/g,"").replace(/<\/span>/g,"")+" - "+e.address,e.displayText=e.name+" - "+e.address}),t.addressList=e.data.list),t.addressList.push({formatName:"",cityId:"-1",displayText:'<span style="color: red">找不到小区？点击这里添加小区</span>'})})):this.addressList=[]},checkAddressSelect:function(e){this.areaCode[2]||(this.$message.error("请先选择所在地区"),e.target.blur())},setAddress:function(e){e&&("-1"===e.cityId?(this.specificAddress="",this.mapModelVisible=!0,this.$set(this,"mapSelectForm",{city:"",name:"",region:"",address:""})):e.areaId!==this.areaCode[2]?this.$emit("addressChange",{zoneId:"",areaCode:[e.provinceId,e.cityId,e.areaId],address:e.formatName,regionAddressId:e.regionAddressId||""}):this.$emit("addressChange",{address:e.formatName,regionAddressId:e.regionAddressId||""}),this.addressList=[])},initBMap:function(){var e=this,t=this,a="",s=void 0,i=u.a.filter(function(t){return t.value===e.tempAreaCode[0]});i[0]&&i[0].children&&(a=i[0].label,this.mapSelectForm.city=a,this.regionOptions=i[0].children.filter(function(t){return t.value===e.tempAreaCode[1]})[0].children);var r=this.regionOptions.filter(function(t){return t.value===e.tempAreaCode[2]});r[0]&&(a+=r[0].label),t.map=new AMap.Map("bm-view",{zooms:[13,19],resizeEnable:!0}),this.geocoder||(this.geocoder=new AMap.Geocoder),console.log(a),this.geocoder.getLocation(a||"杭州市",function(e,a){if("complete"===e&&a.geocodes.length){console.log(a);var i=a.geocodes[0].location;s||(s=new AMap.Marker,t.map.add(s)),s.setPosition(i),t.map.setZoomAndCenter(15,[i.getLng(),i.getLat()])}else alert(p()(a))}),t.map.on("click",function(e){t.setMapPosition(e.lnglat)})},searchPositionByKeywords:function(){var e=this;this.searchKeywords&&AMap.plugin("AMap.PlaceSearch",function(){var t={city:e.mapSelectForm.city||"杭州市"};new AMap.PlaceSearch(t).search(e.searchKeywords,function(t,a){console.log(a),"complete"===t&&a.poiList.pois?e.searchResult=a.poiList.pois:e.searchResult=[]})})},setMapPosition:function(e,t){var a=this,s=[e.lng,e.lat],i=new AMap.Marker({icon:"https://webapi.amap.com/theme/v1.3/markers/n/mark_b.png",position:s});this.map.clearMap(),this.map.add(i),this.map.setZoomAndCenter(15,s),this.geocoder.getAddress(s,function(e,i){if("complete"===e&&i.regeocode){console.log(i);var r=i.regeocode.addressComponent;if((r.city||r.province)!==a.mapSelectForm.city){a.mapSelectForm.city=r.city||r.province;var o=u.a.filter(function(e){return e.label===r.province});if(o[0]&&o[0].children){a.tempAreaCode[0]=o[0].value;var n=o[0].children.filter(function(e){return e.label===(r.city||r.province)});n[0]&&n[0].children&&(a.tempAreaCode[1]=n[0].value,a.regionOptions=n[0].children)}}a.regionOptions.forEach(function(e){e.label===r.district&&(a.mapSelectForm.region=e.value)}),t?r.address=t.name:(r.address=r.building||r.neighborhood,r.address||(r.address=r.township?i.regeocode.formattedAddress.split(r.township)[1]:i.regeocode.formattedAddress)),a.$set(a,"mapSelectForm",c()(a.mapSelectForm,{name:r.address,address:r.province+r.city+r.district+r.street+r.streetNumber,longitude:s[0]+"",latitude:s[1]+""})),a.tempMapData=Object(f.b)(a.mapSelectForm)}}),this.$refs.popover.doShow()},closeMapModel:function(e){var t=this;"save"===e?this.$refs.mapSelectForm.validate(function(e){if(!e)return console.log(e),t.$message.error("您还有必填信息未填写完全，请全部填写好后再保存"),!1;t.addEstateSubdistrict(0)}):this.mapModelVisible=!1},addEstateSubdistrict:function(e){var t=this,a=6;0===(e=e||0)?o()(this.mapSelectForm).forEach(function(e){t.mapSelectForm[e]!==t.tempMapData[e]&&(a=5)}):a=5;var s={provinceId:this.tempAreaCode[0],cityId:this.tempAreaCode[1],regionId:this.tempAreaCode[2],source:a,confirmStatus:e};Object(d.m)(i()({},this.mapSelectForm,s)).then(function(e){var a=e.data;1!==a.confirmStatus?(t.mapModelVisible=!1,t.tempAreaCode[2]!==t.areaCode[2]?t.$emit("addressChange",{areaCode:t.tempAreaCode,address:t.mapSelectForm.name+" - "+t.mapSelectForm.address,regionAddressId:a.regionAddressId,zoneId:""}):t.$emit("addressChange",{address:t.mapSelectForm.name+" - "+t.mapSelectForm.address,regionAddressId:a.regionAddressId})):t.$confirm('新选择的小区名称、区域、具体地址和历史录入的一致，<span style="color:red">但经纬度坐标不一致</span>，是否使用新坐标并覆盖？',"再次确定",{dangerouslyUseHTMLString:!0,distinguishCancelAndClose:!0,confirmButtonText:"使用新地址",cancelButtonText:"使用原地址"}).then(function(){t.addEstateSubdistrict(2)}).catch(function(e){"cancel"===e&&t.addEstateSubdistrict(3)})})},clearAddress:function(){this.$emit("addressChange",{address:"",regionAddressId:""})}}},h=(a("jAH0"),a("KHd+")),v=Object(h.a)(g,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tooltip",{staticClass:"item",attrs:{disabled:!e.specificAddress,content:e.specificAddress,effect:"dark",placement:"top-start"}},[a("el-select",{staticClass:"map-address-select",attrs:{clearable:!0,"remote-method":e.fetchAddressList,loading:e.loading,"popper-append-to-body":!1,filterable:"",remote:"",placeholder:"请输入关键词"},on:{focus:e.checkAddressSelect,clear:e.clearAddress},model:{value:e.specificAddress,callback:function(t){e.specificAddress=t},expression:"specificAddress"}},e._l(e.addressList,function(t,s){return a("el-option",{key:s,attrs:{value:t.formatName},domProps:{innerHTML:e._s(t.displayText)},nativeOn:{click:function(a){e.setAddress(t)}}})}))],1),e._v(" "),a("el-dialog",{attrs:{visible:e.mapModelVisible,"append-to-body":!0,title:"地图选择小区",width:"700px"},on:{"update:visible":function(t){e.mapModelVisible=t}}},[a("el-card",{staticClass:"map-selected-tips",attrs:{"body-style":{padding:"10px"}}},[a("p",[e._v("1. 如果搜索的内容在右侧列表中小区名称不对（例如：天天超市），点击后可以自定义小区名称、具体位置、所在区域。")]),e._v(" "),a("p",[e._v("2. 如果搜索的内容在右侧列表中查询不到，请通过鼠标手动定位房源位置，自定义小区名称、具体位置、所在区域。")])]),e._v(" "),a("div",{staticClass:"map-selected-container"},[a("div",{ref:"bmContainer",staticClass:"bm-container"},[a("div",{staticClass:"bm-view",attrs:{id:"bm-view"}}),e._v(" "),a("el-form-item",{staticClass:"search-input-form",attrs:{label:"","label-width":"0"}},[a("el-input",{staticClass:"search-input",attrs:{placeholder:"请输入公寓地址",clearable:"",size:"small"},nativeOn:{keyup:function(t){return e.searchPositionByKeywords(t)}},model:{value:e.searchKeywords,callback:function(t){e.searchKeywords=t},expression:"searchKeywords"}})],1),e._v(" "),a("el-popover",{ref:"popover",attrs:{"popper-class":"selected-house-position",placement:"bottom",width:"360",trigger:"manual"}},[a("el-form",{ref:"mapSelectForm",attrs:{model:e.mapSelectForm,rules:e.mapSelectFormRules,"label-position":"right","label-width":"80px",size:"mini"}},[a("i",{staticClass:"el-icon-close close-icon",on:{click:function(t){e.$refs.popover.doClose()}}}),e._v(" "),a("el-form-item",{staticClass:"form-item"},[a("div",{staticClass:"city-label",attrs:{slot:"label"},slot:"label"},[e._v("当前城市")]),e._v(" "),a("p",{staticClass:"city-name"},[e._v(e._s(e.mapSelectForm.city))])]),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{label:"所在区域",prop:"region"}},[a("el-select",{staticStyle:{width:"100%"},model:{value:e.mapSelectForm.region,callback:function(t){e.$set(e.mapSelectForm,"region",t)},expression:"mapSelectForm.region"}},e._l(e.regionOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{label:"小区名称",prop:"name"}},[a("el-input",{model:{value:e.mapSelectForm.name,callback:function(t){e.$set(e.mapSelectForm,"name",t)},expression:"mapSelectForm.name"}})],1),e._v(" "),a("el-form-item",{staticClass:"form-item",attrs:{label:"具体地址",prop:"address"}},[a("el-input",{model:{value:e.mapSelectForm.address,callback:function(t){e.$set(e.mapSelectForm,"address",t)},expression:"mapSelectForm.address"}})],1)],1),e._v(" "),a("div",{staticClass:"selected-point",attrs:{slot:"reference"},slot:"reference"})],1)],1),e._v(" "),a("el-card",{staticClass:"search-list",attrs:{"body-style":{padding:"10px 0"}}},e._l(e.searchResult,function(t,s){return a("a",{key:s,staticClass:"search-list-item",on:{click:function(a){e.setMapPosition(t.location,t)}}},[a("p",{staticClass:"title"},[e._v(e._s(t.name))]),e._v(" "),a("p",{staticClass:"address"},[e._v(e._s(t.address))])])}))],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.closeMapModel}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.closeMapModel("save")}}},[e._v("确 定")])],1)],1)],1)},[],!1,null,"604e5ff1",null);v.options.__file="index.vue";t.a=v.exports},KX4T:function(e,t,a){},UoXs:function(e,t,a){"use strict";var s=a("/Dk7");a.n(s).a},ec3i:function(e,t,a){"use strict";var s=a("jUJg");a.n(s).a},jAH0:function(e,t,a){"use strict";var s=a("lA8n");a.n(s).a},jUJg:function(e,t,a){},k6VY:function(e,t,a){"use strict";var s=a("KX4T");a.n(s).a},lA8n:function(e,t,a){},vXZP:function(e,t,a){"use strict";var s=a("14Xm"),i=a.n(s),r=a("4d7F"),o=a.n(r),n=a("D3Ub"),c=a.n(n),l=a("FRYs"),p=a.n(l);document.body.ondrop=function(e){e.preventDefault(),e.stopPropagation()};var d={name:"FhtPreview",components:{draggable:p.a},props:{picList:{type:Array,default:function(){return[]}},deleteIcon:{type:Boolean,default:!1},itemSize:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:!0}},data:function(){return{list:[],isDragging:!1,delayedDragging:!1}},computed:{itemStyle:function(){return{width:this.itemSize.width+"px",height:this.itemSize.height+"px"}},dragOptions:function(){return{animation:150,group:"description",ghostClass:"ghost",disabled:this.disabled}}},watch:{picList:{immediate:!0,handler:function(e){this.list=(e||[]).slice(),this.list.map(function(e,t){e.sortNum=e.sortNum?e.sortNum:Math.random().toFixed(5),e.type=e.type||1,e.title=e.picTag||""})}},isDragging:function(e){var t=this;e?this.delayedDragging=!0:this.$nextTick(function(){t.delayedDragging=!1})}},mounted:function(){},methods:{handlePreview:function(e){var t=this;return c()(i.a.mark(function a(){var s,r,n;return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(1!==t.list.length||!t.list[0].isnoPic){a.next=3;break}return t.$message.warning("友情提示：暂无图片"),a.abrupt("return",!1);case 3:s=function(e){return new o.a(function(t){var a=new Image;a.src=e.src,a.onload=function(s){e.w=a.width||800,e.h=a.height||600,t(e)}})},r=[],n=0;case 6:if(!(n<t.list.length)){a.next=15;break}return a.t0=r,a.next=10,s(t.list[n]);case 10:a.t1=a.sent,a.t0.push.call(a.t0,a.t1);case 12:n++,a.next=6;break;case 15:t.$preview.open(e,r);case 16:case"end":return a.stop()}},a,t)}))()},handleDelete:function(e,t){var a=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.list.splice(e,1),a.handleEmit()}).catch(function(){})},handleEmit:function(){this.$emit("emitDelete",this.list)},startDrag:function(){this.isDragging=!0},endDrag:function(e){this.isDragging=!1,this.handleEmit()}}},m=(a("k6VY"),a("ec3i"),a("KHd+")),u=Object(m.a)(d,function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("draggable",{staticClass:"list-group",attrs:{options:e.dragOptions,element:"ul"},on:{start:e.startDrag,end:e.endDrag},model:{value:e.list,callback:function(t){e.list=t},expression:"list"}},[a("transition-group",{staticClass:"previewItems",attrs:{name:"flip-list",type:"transition"}},e._l(e.list,function(t,s){return a("li",{key:t.sortNum,staticClass:"preview-item clearfix",style:e.itemStyle},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.src,expression:"item.src"}],staticClass:"preview-img img-center"}),e._v(" "),t.picTag?a("span",{staticClass:"preview-tags"},[e._v(e._s(t.picTag))]):e._e(),e._v(" "),a("span",{staticClass:"preview-item-actions"},[a("span",{staticClass:"preview-item__item-preview",on:{click:function(t){e.handlePreview(s)}}},[a("i",{staticClass:"el-icon-zoom-in"})]),e._v(" "),e.deleteIcon?a("span",{staticClass:"preview-item__item-delete",on:{click:function(a){e.handleDelete(s,t)}}},[a("i",{staticClass:"el-icon-delete"})]):e._e()])])}))],1)},[],!1,null,"0e5cb646",null);u.options.__file="Preview.vue";t.a=u.exports}}]);